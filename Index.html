<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>AS-pire âœ¦</title>
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,700;0,900;1,700&family=Outfit:wght@300;400;500;600&family=JetBrains+Mono:wght@400;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="style.css">
</head>
<body>

<canvas id="starCanvas"></canvas>
<div class="mesh"></div>

<div class="top-nav">
  <div class="header">
    <div class="logo-wrap" id="logoWrap">
      <span class="logo-AS">AS</span><span class="logo-dash">-</span><span class="logo-pire">pire</span>
    </div>
    <div class="streak-badge" id="streakBadge">ğŸ”¥ 0 day streak</div>
  </div>
  
  <div class="nav-actions">
    <button class="icon-btn" onclick="window.location.href='calendar.html'" title="View Calendar">ğŸ“… Calendar</button>
    <button class="icon-btn" onclick="openSettings()" title="Settings">âš™ï¸ Settings</button>
  </div>
</div>

<div class="wrap">
  <div class="sticky-stage">
    <div class="sticky" id="stickyCard">
      <div class="s-hdr">âœ¦ shared note â€” auto-saves</div>
      <textarea class="s-body" id="sBody" rows="2" placeholder="Write something inspiring..."></textarea>
      <div class="s-saved" id="sSaved">saved âœ“</div>
    </div>
  </div>

  <div class="demo-banner" id="demoBanner">âš¡ Local mode â€” Firebase not connected yet</div>

  <div class="profile-bar">
    <span class="profile-lbl">Viewing:</span>
    <button class="p-btn active" id="btnYou" onclick="switchProfile('you',event)">
      <div class="p-avatar av-you" id="avYou">A</div>
      <span id="nameYou">You</span>
    </button>
    <button class="p-btn" id="btnFriend" onclick="switchProfile('friend',event)">
      <div class="p-avatar av-friend" id="avFriend">S</div>
      <span id="nameFriend">Friend</span>
    </button>
    <button class="nudge-btn" onclick="sendNudge()" title="Nudge your friend">âš¡</button>
  </div>

  <div class="friend-notice" id="friendNotice" style="display:none">
    âœ &nbsp;Editing <strong id="friendLabel">friend</strong>'s tasks
  </div>

  <div class="tab-wrap">
    <div class="tab-pill" id="tabPill"></div>
    <button class="tab-btn active" id="tDaily" onclick="switchTab('daily')">
      <span class="tab-icon">â˜€</span> Daily
    </button>
    <button class="tab-btn" id="tWeekly" onclick="switchTab('weekly')">
      <span class="tab-icon">â—ˆ</span> Weekly
    </button>
  </div>

  <div class="cdown">
    <span class="cd-lbl" id="cdLbl">No tasks yet</span>
    <span class="cd-val"><span class="live-dot"></span><span id="cdVal">â€”</span></span>
  </div>

  <div class="prog-wrap">
    <div class="prog-row">
      <span class="prog-lbl" id="progLbl">Daily Progress</span>
      <span class="prog-pct" id="progPct">0%</span>
    </div>
    <div class="prog-track">
      <div class="prog-fill empty" id="progFill" style="width:0%"></div>
    </div>
  </div>

  <div class="add-row">
    <input type="text" class="t-input" id="tInput" placeholder="Add a new task...">
    <button class="add-btn" id="addBtn" title="Add task">+</button>
  </div>

  <div class="tasks" id="taskList"></div>

  <div class="all-done" id="allDone">
    <div class="all-done-title">âœ¦ Every task complete âœ¦</div>
    <div class="all-done-sub">you're absolutely unstoppable</div>
  </div>
</div>

<div class="overlay" id="modal">
  <div class="modal">
    <div class="modal-title">Set Names</div>
    <div class="m-field"><label>Your name</label><input type="text" class="m-input" id="mYour" placeholder="e.g. A"></div>
    <div class="m-field"><label>Friend's name</label><input type="text" class="m-input" id="mFriend" placeholder="e.g. S"></div>
    <div class="m-btns">
      <button class="m-btn secondary" onclick="closeModal()">Cancel</button>
      <button class="m-btn primary" onclick="saveNames()">Save âœ“</button>
    </div>
  </div>
</div>

<div class="overlay" id="settingsModal">
  <div class="modal">
    <div class="modal-title">Fixed Daily Tasks</div>
    <p style="font-size: 12px; color: var(--muted); margin-bottom: 15px;">These tasks will automatically appear in the Daily tab every midnight.</p>
    
    <div class="m-field">
      <label>Assign To</label>
      <select class="m-input" id="fixedAssignee">
        <option value="you">You (A)</option>
        <option value="friend">Friend (S)</option>
      </select>
    </div>
    <div class="m-field">
      <label>Task Description</label>
      <input type="text" class="m-input" id="mFixedTask" placeholder="e.g. Read 10 pages">
    </div>
    <div class="m-btns">
      <button class="m-btn secondary" onclick="closeSettings()">Close</button>
      <button class="m-btn primary" onclick="saveFixedTask()">Add Task âœ“</button>
    </div>
  </div>
</div>

<div class="sync-pill">
  <div class="sync-dot local" id="syncDot"></div>
  <span id="syncLbl">local</span>
</div>

<script type="module" src="app.js"></script>
</body>
</html>
